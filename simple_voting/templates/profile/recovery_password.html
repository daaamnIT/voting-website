{% extends 'main/base.html' %}
{% block title%}
<title>Recovery password</title>
{% endblock %}
{% block content%}
<div class="card jumbotron mt-3 shadow-lg" style="width: 50%; margin: 0 auto">
    <div class="card-body text-center">
        <h1 class="card-title ">Восстановление пароля</h1>
    </div>
</div>
{% if step == "1" %}
<div class="card jumbotron mt-3 mb-3 shadow-lg" style="width: 50%; margin: 0 auto">
    <div class="card-body text-center">
        {% if error %}
        <h5 class="card-title text-danger font-weight-bold">ОШИБКА!</h5>
        <div class="text-center text-danger font-weight-bold mt-2"><h5>{{error}}</h5></div>
        <hr>
        {% endif %}
        <h5 class="card-title">Введите имя пользвателя или email</h5>
        <form action="/recovery_password/" method="POST">
            {% csrf_token %}
            <hr style="background: white">
            <input class="form-control" name="start_procedure" placeholder="login or email" required="True">
            <button type="submit" class="btn btn-outline-dark btn-block mt-3">Отправить</button>
        </form>
    </div>
</div>
{% elif step == "2" %}
<div class="card jumbotron mt-3 mb-3 border-success" style="width: 50%; margin: 0 auto">
    <div class="card-body text-center">
        {% if error %}
        <h5 class="card-title text-danger font-weight-bold">ОШИБКА!</h5>
        <div class="text-center text-danger font-weight-bold mt-2"><h5>{{error}}</h5></div>
        <hr>
        {% endif %}
        <h5 class="card-title">Введите полученный код</h5>
        <form action="/recovery_password/" method="POST">
            {% csrf_token %}
            <hr style="background: white">
            <input class="form-control" name="code" placeholder="code" required="True">
            <button type="submit" class="btn btn-outline-success btn-block mt-3">Отправить</button>
        </form>
    </div>
</div>
{% elif step == "3" %}
<div class="card jumbotron mt-3 mb-3 border-success" style="width: 50%; margin: 0 auto">
    <div class="card-body text-center">
        {% if error %}
        <h5 class="card-title text-danger font-weight-bold">ОШИБКА!</h5>
        <div class="text-center text-danger font-weight-bold mt-2"><h5>{{error}}</h5></div>
        <hr>
        {% endif %}
        <h5 class="card-title">Введите новый пароль</h5>
        <form action="/recovery_password/" method="POST">
            {% csrf_token %}
            <div class="row">
                <div class="col-12">
                    {{ form.password.label }}
                </div>
                <div class="col-12 mt-1">
                    {{ form.password }}
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-12">
                    {{ form.password2.label }}
                </div>
                <div class="col-12 mt-1">
                    {{ form.password2 }}
                </div>
            </div>
            <button type="submit" class="btn btn-outline-success btn-block mt-3">Отправить</button>
        </form>
    </div>
</div>
{% elif step == "4" %}
<div class="card jumbotron mt-3 mb-3 border-success" style="width: 50%; margin: 0 auto">
    <div class="card-body text-center">
        <h5 class="card-title">Успешно!</h5>
        <hr style="background: white">
        <button onclick="window.location.href = '../';" type="button" class="btn btn-outline-success btn-block mt-3">На главную</button>
    </div>
</div>
{% endif %}
{% endblock %}
